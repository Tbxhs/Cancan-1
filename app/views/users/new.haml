#content
  .cancan
    %ul.tags
      %li
        %a{ :href => "#" } 在这里吃晚餐
    .regular
      .text
        %section#login-form.box
        = form_for @user, :url => users_path, :validate => true do |f|
          %fieldset
            %legend= t('signup')
            .control-group
              .control-label
                = f.label :login
              .controls
                .full-input-wrap= f.text_field :login, :tabIndex => 1
            .control-group
              .control-label
                = f.label :email
              .controls
                .full-input-wrap= f.text_field :email, :tabIndex => 2
            .control-group
              .control-label
                = f.label :password
              .controls
                .full-input-wrap= f.password_field :password, :tabIndex => 3
            .control-group
              .control-label
                = f.label :password_confirmation
              .controls
                .full-input-wrap= f.password_field :password_confirmation, :tabIndex => 4
            =hidden_field_tag("user[locale]", "nil" )
            .form-actions
              = f.submit t('signup'),{ :class => 'btn primary', :tabIndex => 5}
              = t 'or'
              = link_to t('.already_have_account'), login_path
      %p.labels
        %a{ :href => "#" }=t('signup')
%script{ :type => "text/javascript", :src => "http://api.map.baidu.com/api?v=1.3"}
:javascript  
  var point = new BMap.Point();
  var geolocation = new BMap.Geolocation();
  geolocation.getCurrentPosition(function(r){
    if(this.getStatus() == BMAP_STATUS_SUCCESS){
      $("#user_locale").val(r.point.lng+','+r.point.lat);
      alert($("#user_locale").val());
    }
    else {
      alert('failed'+this.getStatus());
    }
  })